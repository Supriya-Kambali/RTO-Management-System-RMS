## üåê PUBLIC APIS (No Authentication)
### 1. Health Check
**GET** `http://localhost:3000/health`
Check if the server is running

### 2. Register User
**POST** `http://localhost:3000/auth/register`
Register a new citizen account
```json
{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "password123",
  "phone": "9876543210",
  "address": "123 Main Street, Mumbai",
  "date_of_birth": "1995-05-15",
  "aadhaar_number": "123456789012"
}

3. Login
POST http://localhost:3000/auth/login
Login with email and password to get access token
{
  "email": "john.doe@example.com",
  "password": "password123"
}

4. Refresh Token // NOT WORKING
POST http://localhost:3000/auth/refresh-token
Get a new access token using refresh token

{
  "refreshToken": "your-refresh-token-here"
}

5. Forgot Password // NOt WORKING in real time otp is not going to email
POST http://localhost:3000/auth/forgot-password
Request OTP for password reset
{
  "email": "john.doe@example.com"
}

6. Verify OTP // Cant verify email
POST http://localhost:3000/auth/verify-otp
Verify OTP sent to email
{
  "email": "john.doe@example.com",
  "otp": "123456"
}

7. Reset Password // Not working 
POST http://localhost:3000/auth/reset-password
Reset password using reset token
{
  "resetToken": "token-from-verify-otp",
  "newPassword": "newPassword123"
}

üë§ CITIZEN ROLE APIS
Login as Citizen:
{
  "email": "john.doe@example.com",
  "password": "password123"
}
Add to Headers: Authorization: Bearer <your-access-token>

rto_office_id: "70564e61-b1f5-4907-8cff-be1a68bfb3ff" (Mumbai RTO)
1. Get My Profile 70564e61-b1f5-4907-8cff-be1a68bfb3ff
GET http://localhost:3000/users/profile
View your own profile details

2. Update My Profile
PUT http://localhost:3000/users/profile
Update your profile information

{
  "name": "John Updated Doe",
  "phone": "9876543211",
  "address": "456 New Street, Mumbai"
}
3. Change Password // not working {    "success": false,    "message": "Current and new password are required"}
PUT http://localhost:3000/auth/change-password
Change your password when logged in
{
  "oldPassword": "password123",
  "newPassword": "newPassword456"
}

4. Logout
POST http://localhost:3000/auth/logout
Logout from current session

5. Register New Vehicle //Not working need to select valid rto office id 
vehicle_id  c34478e-334b-4962-ac10-a67e0cdcdaa2
e45bc3aa-e133-4a7a-b15c-e2d9a4f92284
POST http://localhost:3000/vehicles/register
Register a new vehicle under your name
{
  "vehicle_type": "CAR",
  "make": "Maruti Suzuki",
  "model": "Swift",
  "year": 2023,
  "color": "Red",
  "engine_number": "ENG123456789",
  "chassis_number": "CHS987654321",
  "fuel_type": "PETROL",
  "rto_office_id": "9315444f-453b-4833-bfcd-f0a01b622859"
}
rto_office_id: "9315444f-453b-4833-bfcd-f0a01b622859" (Chennai RTO)

6. Get My Vehicles
GET http://localhost:3000/vehicles/my
View all your registered vehicles

7. Transfer Vehicle Ownership //Not working
POST http://localhost:3000/vehicles/:id/transfer
Transfer vehicle ownership to another user
{
  "to_owner_id": "uuid-of-new-owner"
}

8. Get My Challans
GET http://localhost:3000/challans/my
View all traffic challans issued to your vehicles

9. Dispute a Challan //need to test
POST http://localhost:3000/challans/:id/dispute
Dispute a traffic challan

{
  "dispute_reason": "Vehicle was not at the location during the violation time"
}

10. Apply for Driving License 
POST http://localhost:3000/dl/apply
Apply for a new driving license
{
  "rto_office_id": "9315444f-453b-4833-bfcd-f0a01b622859",
  "license_type": "LMV"
}

11. Get My DL Applications
GET http://localhost:3000/dl/applications/my
View all your driving license applications

12. Get My Driving License 
GET http://localhost:3000/dl/my
View your active driving license

13. Renew Driving License // need to test
POST http://localhost:3000/dl/:dlNumber/renew
Renew your driving license before expiry

14. Initiate Payment // Not working
POST http://localhost:3000/payments/initiate
Initiate a new payment for challan or service


15. Pay Challan (Legacy) //need to test
POST http://localhost:3000/payments/pay/:challanId
Direct payment for a challan
{
  "payment_method": "CARD",
  "transaction_id": "TXN123456789"
}

16. Get My Payment History
GET http://localhost:3000/payments/history
View all your payment transactions

17. Book Appointment //notes is not adding 
POST http://localhost:3000/appointments/book
Book an appointment at RTO office 
appointment id: 08aa8aa4-af1a-410e-8c0b-a459f6b6106f

{
  "rto_office_id": "9315444f-453b-4833-bfcd-f0a01b622859",
  "purpose": "DL_TEST",
  "appointment_date": "2025-12-30T10:00:00Z",
  "notes": "Need to take driving test"
}

18. Get My Appointments 
GET http://localhost:3000/appointments/my
View all your appointments

19. Reschedule Appointment 
PUT http://localhost:3000/appointments/:id/reschedule
Reschedule your appointment
{
  "new_date": "2025-12-31T11:00:00Z"
}

20. Cancel Appointment //Invalid Token 
PUT http://localhost:3000/appointments/:id/cancel
Cancel your appointment
 
21. Get My Notifications
GET http://localhost:3000/notifications
View all your notifications


22. Mark Notification as Read //need to test
PUT http://localhost:3000/notifications/:id/read
Mark a notification as read

23. Citizen Role Test
GET http://localhost:3000/citizen/test
Test endpoint to verify citizen role access


üëÆ POLICE ROLE APIS
Login as Police:

{
  "email": "police@traffic.gov.in",
  "password": "admin123"
}

1. Issue Traffic Challan 
POST http://localhost:3000/challans
challan id: f339a6d5-1f58-4fa8-8872-1e2d6afb2f0e
d95c8eb0-5675-491c-8a36-b196e203ef9c
Issue a traffic challan to a vehicle
{
  "vehicle_id": "uuid-of-vehicle",
  "violation_type": "OVER_SPEEDING",
  "amount": 1000.00
}

2. List All Challans
GET http://localhost:3000/challans
View all traffic challans in the system

3. Get Violation Analytics
GET http://localhost:3000/analytics/violations
View violation statistics and trends

4. Get My Profile
GET http://localhost:3000/users/profile
View your profile

5. Update My Profile
PUT http://localhost:3000/users/profile
Update your profile information


üßë‚Äçüíº RTO_OFFICER ROLE APIS
Login as RTO Officer:
{
  "email": "officer@rto.gov.in",
  "password": "admin123"
}

1. Verify Vehicle Documents 
PUT http://localhost:3000/vehicles/:id/verify
Verify and validate vehicle registration documents

{
  "verified": true,
  "notes": "All documents verified successfully"
}

2. Verify DL Application Documents //need to test
PUT http://localhost:3000/dl/applications/:id/verify
Verify driving license application documents
{
  "verified": true,
  "notes": "Documents verified, ready for test"
}

3. Get DL Application Details
GET http://localhost:3000/dl/applications/:id
View specific DL application details

4. List All Appointments
GET http://localhost:3000/appointments
View all scheduled appointments

5. Complete Appointment //notes is not adding
PUT http://localhost:3000/appointments/:id/complete
Mark an appointment as completed
{
  "notes": "Test completed successfully"
}

6. Officer Role Test
GET http://localhost:3000/officer/test
Test endpoint to verify officer role access


üè¢ RTO_ADMIN ROLE APIS
Login as RTO Admin:
{
  "email": "rtoadmin@rto.gov.in",
  "password": "admin123"
}

1. List All Vehicles
GET http://localhost:3000/vehicles
View all vehicles registered in the system

2. Approve Vehicle Registration
PUT http://localhost:3000/vehicles/:id/approve
Approve a vehicle registration after verification

{
  "registration_number": "MH01AB1234"
}

3. Mark Vehicle as Scrapped //    "approved_by": null,
            "approved_at": null, are not setting 

PUT http://localhost:3000/vehicles/:id/scrap
Mark a vehicle as scrapped/deregistered

4. View All DL Applications
GET http://localhost:3000/dl/applications
View all driving license applications

dl_id 852d3d92-1011-45c2-a250-282401ce7d17

5. Get DL Application Details
GET http://localhost:3000/dl/applications/:id
View specific DL application

6. Schedule DL Test
POST http://localhost:3000/dl/applications/:id/schedule-test
Schedule a driving test for applicant
{
  "test_date": "2025-12-28T10:00:00Z"
}

7. Approve DL Application
PUT http://localhost:3000/dl/applications/:id/approve
Approve driving license application and issue license

{
  "dl_number": "MH0120250001234",
  "test_result": "PASSED"
}

8. Reject DL Application
PUT http://localhost:3000/dl/applications/:id/reject
Reject a driving license application
{
  "rejected_reason": "Failed driving test - unable to perform parallel parking"
}
9. List All Challans
GET http://localhost:3000/challans
View all traffic challans

10. Resolve Challan Dispute
PUT http://localhost:3000/challans/:id/resolve
Resolve a disputed challan
{
  "dispute_resolution": "ACCEPTED",
  "resolution_notes": "Video evidence confirms vehicle was not at location"
}

11. List All Payments
GET http://localhost:3000/payments
View all payment transactions


12. Refund a Payment
POST http://localhost:3000/payments/:id/refund
Process a payment refund
{
  "refund_reason": "Challan dispute accepted"
}

13. List All Appointments
GET http://localhost:3000/appointments
View all appointments

14. Complete Appointment
PUT http://localhost:3000/appointments/:id/complete
Mark appointment as completed

15. Send Notification
POST http://localhost:3000/notifications/send
Send notification to a user

{
  "user_id": "uuid-of-user",
  "message": "Your driving license has been approved"
}

16. Get User Details
GET http://localhost:3000/users/:id
View specific user details

17. Update User
PUT http://localhost:3000/users/:id
Update user information
{
  "name": "Updated Name",
  "phone": "9999999999",
  "status": "ACTIVE"
}

18. Get Dashboard Analytics
GET http://localhost:3000/analytics/dashboard
View comprehensive dashboard statistics



19. Get Revenue Analytics
GET http://localhost:3000/analytics/revenue
View revenue reports and statistics

20. Get Violation Analytics
GET http://localhost:3000/analytics/violations
View violation statistics

21. Get ML Risk Assessment //need implementation
GET http://localhost:3000/analytics/ml-risk
View ML-based risk assessment data

22. Admin Role Test
GET http://localhost:3000/admin/test
Test endpoint to verify admin role access


üëë SUPER_ADMIN ROLE APIS
Login as Super Admin:
{
  "email": "admin@rto.gov.in",
  "password": "admin123"
}
Note: Super Admin has access to ALL RTO_ADMIN APIs plus:

1. List All RTO Offices
GET http://localhost:3000/rto/offices
View all RTO offices in the system

1. Add RTO Office
POST http://localhost:3000/rto/offices
Create a new RTO office


2. Update RTO Office
PUT http://localhost:3000/rto/offices/:id
Update RTO office details
{
  "name": "Delhi North RTO - Updated",
  "phone": "011-27654322",
  "status": "ACTIVE"
}

3. Delete RTO Office
DELETE http://localhost:3000/rto/offices/:id
Remove an RTO office

4. List All Users
GET http://localhost:3000/users
View all users in the system

5. Delete User
DELETE http://localhost:3000/users/:id
Remove a user from the system

6. Assign Role to User
POST http://localhost:3000/users/assign-role
Assign or change user role

{
  "user_id": "uuid-of-user",
  "role": "RTO_OFFICER",
  "rto_office_id": "uuid-of-rto-office"
}

üìä AUDITOR ROLE APIS
Login as Auditor:
{
  "email": "auditor@rto.gov.in",
  "password": "admin123"
}

1. Get Dashboard Analytics
GET http://localhost:3000/analytics/dashboard
View comprehensive system statistics

2. Get Revenue Analytics
GET http://localhost:3000/analytics/revenue
View revenue reports and payment statistics

3. Get Violation Analytics
GET http://localhost:3000/analytics/violations
View traffic violation statistics

4. List All Payments
GET http://localhost:3000/payments
Audit all payment transactions

5. Get My Profile
GET http://localhost:3000/users/profile
View your profile

üîì ALL AUTHENTICATED USERS APIS
These APIs work for any logged-in user (any role):

1. Get Vehicle Details
GET http://localhost:3000/vehicles/:id
View specific vehicle details

2. Get Vehicle Challans
GET http://localhost:3000/challans/vehicle/:vehicleId
View all challans for a specific vehicle
3. Get Challan Details
GET http://localhost:3000/challans/:id
View specific challan details

4. Get DL by Number
GET http://localhost:3000/dl/:dlNumber
Search and view driving license by DL number

5. Get Payment Details
GET http://localhost:3000/payments/:id
View specific payment transaction

6. Verify Payment
PUT http://localhost:3000/payments/:id/verify
Verify and complete a payment
{
  "transaction_id": "TXN987654321",
  "status": "COMPLETED"
}

7. Get Appointment Details
GET http://localhost:3000/appointments/:id
View specific appointment details

8. List RTO Offices
GET http://localhost:3000/rto/offices
View all RTO offices

9. Get RTO Office Details
GET http://localhost:3000/rto/offices/:id
View specific RTO office details

10. Get My Notifications
GET http://localhost:3000/notifications
View your notifications

11. Mark Notification as Read
PUT http://localhost:3000/notifications/:id/read
Mark notification as read



üß™ Test Login Credentials
Role	Email	Password
Citizen	john.doe@example.com	password123
Police	police@traffic.gov.in	admin123
RTO Officer	officer@rto.gov.in	admin123
RTO Admin	rtoadmin@rto.gov.in	admin123
Super Admin	admin@rto.gov.in	admin123
Auditor	auditor@rto.gov.in	admin123