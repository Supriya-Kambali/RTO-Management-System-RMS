{
  "info": {
    "name": "RTO Management System API",
    "description": "Complete API collection for RTO Management System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000"
    },
    {
      "key": "access_token",
      "value": ""
    },
    {
      "key": "refresh_token",
      "value": ""
    },
    {
      "key": "user_id",
      "value": ""
    },
    {
      "key": "rto_office_id",
      "value": ""
    },
    {
      "key": "vehicle_id",
      "value": ""
    },
    {
      "key": "dl_application_id",
      "value": ""
    },
    {
      "key": "challan_id",
      "value": ""
    },
    {
      "key": "payment_id",
      "value": ""
    },
    {
      "key": "appointment_id",
      "value": ""
    },
    {
      "key": "notification_id",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "1. Health Check",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Authentication",
      "item": [
        {
          "name": "2.1 Register Citizen",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.user) {",
                  "    pm.collectionVariables.set('user_id', jsonData.data.user.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Rahul Sharma\",\n    \"email\": \"rahul@gmail.com\",\n    \"password\": \"password123\",\n    \"phone\": \"9876543210\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "2.2 Login Citizen",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data) {",
                  "    pm.collectionVariables.set('access_token', jsonData.data.accessToken);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.data.refreshToken);",
                  "    pm.collectionVariables.set('user_id', jsonData.data.user.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"rahul@gmail.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "2.3 Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data) {",
                  "    pm.collectionVariables.set('access_token', jsonData.data.accessToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/refresh-token",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh-token"]
            }
          }
        },
        {
          "name": "2.4 Forgot Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"rahul@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/forgot-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "forgot-password"]
            }
          }
        },
        {
          "name": "2.5 Reset Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"token\": \"reset_token_here\",\n    \"newPassword\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/reset-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "reset-password"]
            }
          }
        },
        {
          "name": "2.6 Verify OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"rahul@gmail.com\",\n    \"otp\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/verify-otp",
              "host": ["{{base_url}}"],
              "path": ["auth", "verify-otp"]
            }
          }
        },
        {
          "name": "2.7 Change Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"currentPassword\": \"password123\",\n    \"newPassword\": \"newpassword456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/change-password",
              "host": ["{{base_url}}"],
              "path": ["auth", "change-password"]
            }
          }
        },
        {
          "name": "2.8 Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "3. User Management",
      "item": [
        {
          "name": "3.1 Get My Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            }
          }
        },
        {
          "name": "3.2 Update My Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Rahul Kumar Sharma\",\n    \"phone\": \"9876543211\",\n    \"address\": \"123 Main Street, Mumbai, Maharashtra\",\n    \"date_of_birth\": \"1995-05-15\",\n    \"aadhaar_number\": \"1234-5678-9012\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            }
          }
        },
        {
          "name": "3.3 List All Users (SUPER_ADMIN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            }
          }
        },
        {
          "name": "3.4 Get User by ID (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            }
          }
        },
        {
          "name": "3.5 Update User (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"ACTIVE\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            }
          }
        },
        {
          "name": "3.6 Assign Role (SUPER_ADMIN)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"{{user_id}}\",\n    \"role\": \"RTO_OFFICER\",\n    \"rtoOfficeId\": \"{{rto_office_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/assign-role",
              "host": ["{{base_url}}"],
              "path": ["users", "assign-role"]
            }
          }
        },
        {
          "name": "3.7 Delete User (SUPER_ADMIN)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "4. RTO Offices",
      "item": [
        {
          "name": "4.1 Create RTO Office (SUPER_ADMIN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.rtoOffice) {",
                  "    pm.collectionVariables.set('rto_office_id', jsonData.data.rtoOffice.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Mumbai Central RTO\",\n    \"code\": \"MH01\",\n    \"state\": \"Maharashtra\",\n    \"district\": \"Mumbai\",\n    \"address\": \"RTO Building, Tardeo Road, Mumbai - 400034\",\n    \"phone\": \"022-23456789\",\n    \"email\": \"mh01@rto.gov.in\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/rto/offices",
              "host": ["{{base_url}}"],
              "path": ["rto", "offices"]
            }
          }
        },
        {
          "name": "4.2 List All RTO Offices",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/rto/offices",
              "host": ["{{base_url}}"],
              "path": ["rto", "offices"]
            }
          }
        },
        {
          "name": "4.3 Get RTO Office by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/rto/offices/{{rto_office_id}}",
              "host": ["{{base_url}}"],
              "path": ["rto", "offices", "{{rto_office_id}}"]
            }
          }
        },
        {
          "name": "4.4 Update RTO Office (SUPER_ADMIN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Mumbai Central RTO - Main Branch\",\n    \"phone\": \"022-23456790\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/rto/offices/{{rto_office_id}}",
              "host": ["{{base_url}}"],
              "path": ["rto", "offices", "{{rto_office_id}}"]
            }
          }
        },
        {
          "name": "4.5 Delete RTO Office (SUPER_ADMIN)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/rto/offices/{{rto_office_id}}",
              "host": ["{{base_url}}"],
              "path": ["rto", "offices", "{{rto_office_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "5. Vehicle Registration",
      "item": [
        {
          "name": "5.1 Register Vehicle (CITIZEN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.vehicle) {",
                  "    pm.collectionVariables.set('vehicle_id', jsonData.data.vehicle.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"vehicle_type\": \"Car\",\n    \"make\": \"Maruti Suzuki\",\n    \"model\": \"Swift\",\n    \"year\": 2024,\n    \"color\": \"White\",\n    \"engine_number\": \"K12N1234567\",\n    \"chassis_number\": \"MA3EYD81S00123456\",\n    \"fuel_type\": \"Petrol\",\n    \"rto_office_id\": \"{{rto_office_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehicles/register",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "register"]
            }
          }
        },
        {
          "name": "5.2 Get My Vehicles (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vehicles/my",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "my"]
            }
          }
        },
        {
          "name": "5.3 List All Vehicles (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vehicles",
              "host": ["{{base_url}}"],
              "path": ["vehicles"]
            }
          }
        },
        {
          "name": "5.4 Get Vehicle by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vehicles/{{vehicle_id}}",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "{{vehicle_id}}"]
            }
          }
        },
        {
          "name": "5.5 Verify Vehicle (RTO_OFFICER)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vehicles/{{vehicle_id}}/verify",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "{{vehicle_id}}", "verify"]
            }
          }
        },
        {
          "name": "5.6 Approve Vehicle (RTO_ADMIN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"registration_number\": \"MH01AB1234\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehicles/{{vehicle_id}}/approve",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "{{vehicle_id}}", "approve"]
            }
          }
        },
        {
          "name": "5.7 Transfer Vehicle (CITIZEN)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"to_user_id\": \"new-owner-uuid-here\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/vehicles/{{vehicle_id}}/transfer",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "{{vehicle_id}}", "transfer"]
            }
          }
        },
        {
          "name": "5.8 Mark Vehicle Scrapped (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vehicles/{{vehicle_id}}/scrap",
              "host": ["{{base_url}}"],
              "path": ["vehicles", "{{vehicle_id}}", "scrap"]
            }
          }
        }
      ]
    },
    {
      "name": "6. DL Applications",
      "item": [
        {
          "name": "6.1 Apply for DL (CITIZEN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.application) {",
                  "    pm.collectionVariables.set('dl_application_id', jsonData.data.application.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"rto_office_id\": \"{{rto_office_id}}\",\n    \"license_type\": \"LMV\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/dl-applications",
              "host": ["{{base_url}}"],
              "path": ["dl-applications"]
            }
          }
        },
        {
          "name": "6.2 Get My DL Applications (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl-applications/my",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "my"]
            }
          }
        },
        {
          "name": "6.3 List All DL Applications (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl-applications",
              "host": ["{{base_url}}"],
              "path": ["dl-applications"]
            }
          }
        },
        {
          "name": "6.4 Get DL Application by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl-applications/{{dl_application_id}}",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "{{dl_application_id}}"]
            }
          }
        },
        {
          "name": "6.5 Verify Documents (RTO_OFFICER)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl-applications/{{dl_application_id}}/verify",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "{{dl_application_id}}", "verify"]
            }
          }
        },
        {
          "name": "6.6 Schedule Driving Test (RTO_ADMIN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"test_date\": \"2025-01-15T10:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/dl-applications/{{dl_application_id}}/schedule-test",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "{{dl_application_id}}", "schedule-test"]
            }
          }
        }
      ]
    },
    {
      "name": "7. Driving Licenses",
      "item": [
        {
          "name": "7.1 Get My Driving License (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl/my",
              "host": ["{{base_url}}"],
              "path": ["dl", "my"]
            }
          }
        },
        {
          "name": "7.2 Get DL by Number",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl/MH0120250001",
              "host": ["{{base_url}}"],
              "path": ["dl", "MH0120250001"]
            }
          }
        },
        {
          "name": "7.3 Approve DL Application (RTO_ADMIN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl-applications/{{dl_application_id}}/approve",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "{{dl_application_id}}", "approve"]
            }
          }
        },
        {
          "name": "7.4 Reject DL Application (RTO_ADMIN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Documents are not clear. Please resubmit with proper documents.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/dl-applications/{{dl_application_id}}/reject",
              "host": ["{{base_url}}"],
              "path": ["dl-applications", "{{dl_application_id}}", "reject"]
            }
          }
        },
        {
          "name": "7.5 Renew DL (CITIZEN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dl/MH0120250001/renew",
              "host": ["{{base_url}}"],
              "path": ["dl", "MH0120250001", "renew"]
            }
          }
        }
      ]
    },
    {
      "name": "8. Challans",
      "item": [
        {
          "name": "8.1 Issue Challan (POLICE)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.challan) {",
                  "    pm.collectionVariables.set('challan_id', jsonData.data.challan.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"vehicle_id\": \"{{vehicle_id}}\",\n    \"violation_type\": \"Over Speeding\",\n    \"amount\": 1000\n}"
            },
            "url": {
              "raw": "{{base_url}}/challans",
              "host": ["{{base_url}}"],
              "path": ["challans"]
            }
          }
        },
        {
          "name": "8.2 List All Challans (Admin/Police)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/challans",
              "host": ["{{base_url}}"],
              "path": ["challans"]
            }
          }
        },
        {
          "name": "8.3 Get My Challans (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/challans/my",
              "host": ["{{base_url}}"],
              "path": ["challans", "my"]
            }
          }
        },
        {
          "name": "8.4 Get Challan by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/challans/{{challan_id}}",
              "host": ["{{base_url}}"],
              "path": ["challans", "{{challan_id}}"]
            }
          }
        },
        {
          "name": "8.5 Get Challans by Vehicle",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/challans/vehicle/{{vehicle_id}}",
              "host": ["{{base_url}}"],
              "path": ["challans", "vehicle", "{{vehicle_id}}"]
            }
          }
        },
        {
          "name": "8.6 Dispute Challan (CITIZEN)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"I was not driving the vehicle at that time. Request CCTV verification.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/challans/{{challan_id}}/dispute",
              "host": ["{{base_url}}"],
              "path": ["challans", "{{challan_id}}", "dispute"]
            }
          }
        },
        {
          "name": "8.7 Resolve Dispute (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"resolution\": \"Dispute rejected - CCTV footage confirms the violation\",\n    \"new_status\": \"UNPAID\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/challans/{{challan_id}}/resolve",
              "host": ["{{base_url}}"],
              "path": ["challans", "{{challan_id}}", "resolve"]
            }
          }
        }
      ]
    },
    {
      "name": "9. Payments",
      "item": [
        {
          "name": "9.1 Initiate Payment (CITIZEN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.payment) {",
                  "    pm.collectionVariables.set('payment_id', jsonData.data.payment.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"amount\": 1000,\n    \"payment_type\": \"CHALLAN\",\n    \"challan_id\": \"{{challan_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/initiate",
              "host": ["{{base_url}}"],
              "path": ["payments", "initiate"]
            }
          }
        },
        {
          "name": "9.2 Pay Challan Direct (CITIZEN)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/pay/{{challan_id}}",
              "host": ["{{base_url}}"],
              "path": ["payments", "pay", "{{challan_id}}"]
            }
          }
        },
        {
          "name": "9.3 Verify Payment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"transaction_id\": \"TXN123456789\",\n    \"payment_method\": \"UPI\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/{{payment_id}}/verify",
              "host": ["{{base_url}}"],
              "path": ["payments", "{{payment_id}}", "verify"]
            }
          }
        },
        {
          "name": "9.4 Get Payment History (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/history",
              "host": ["{{base_url}}"],
              "path": ["payments", "history"]
            }
          }
        },
        {
          "name": "9.5 List All Payments (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments",
              "host": ["{{base_url}}"],
              "path": ["payments"]
            }
          }
        },
        {
          "name": "9.6 Get Payment by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/{{payment_id}}",
              "host": ["{{base_url}}"],
              "path": ["payments", "{{payment_id}}"]
            }
          }
        },
        {
          "name": "9.7 Refund Payment (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Duplicate payment - refunding to customer\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/{{payment_id}}/refund",
              "host": ["{{base_url}}"],
              "path": ["payments", "{{payment_id}}", "refund"]
            }
          }
        }
      ]
    },
    {
      "name": "10. Appointments",
      "item": [
        {
          "name": "10.1 Book Appointment (CITIZEN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.appointment) {",
                  "    pm.collectionVariables.set('appointment_id', jsonData.data.appointment.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"rto_office_id\": \"{{rto_office_id}}\",\n    \"purpose\": \"Driving License Test\",\n    \"appointment_date\": \"2025-01-20T10:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appointments/book",
              "host": ["{{base_url}}"],
              "path": ["appointments", "book"]
            }
          }
        },
        {
          "name": "10.2 Get My Appointments (CITIZEN)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/appointments/my",
              "host": ["{{base_url}}"],
              "path": ["appointments", "my"]
            }
          }
        },
        {
          "name": "10.3 List All Appointments (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/appointments",
              "host": ["{{base_url}}"],
              "path": ["appointments"]
            }
          }
        },
        {
          "name": "10.4 Get Appointment by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/appointments/{{appointment_id}}",
              "host": ["{{base_url}}"],
              "path": ["appointments", "{{appointment_id}}"]
            }
          }
        },
        {
          "name": "10.5 Reschedule Appointment (CITIZEN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"new_date\": \"2025-01-25T14:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appointments/{{appointment_id}}/reschedule",
              "host": ["{{base_url}}"],
              "path": ["appointments", "{{appointment_id}}", "reschedule"]
            }
          }
        },
        {
          "name": "10.6 Cancel Appointment (CITIZEN)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/appointments/{{appointment_id}}/cancel",
              "host": ["{{base_url}}"],
              "path": ["appointments", "{{appointment_id}}", "cancel"]
            }
          }
        },
        {
          "name": "10.7 Complete Appointment (Officer)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"notes\": \"Driving test completed successfully. Candidate passed.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appointments/{{appointment_id}}/complete",
              "host": ["{{base_url}}"],
              "path": ["appointments", "{{appointment_id}}", "complete"]
            }
          }
        }
      ]
    },
    {
      "name": "11. Notifications",
      "item": [
        {
          "name": "11.1 Get My Notifications",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data && jsonData.data.notifications && jsonData.data.notifications.length > 0) {",
                  "    pm.collectionVariables.set('notification_id', jsonData.data.notifications[0].id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications",
              "host": ["{{base_url}}"],
              "path": ["notifications"]
            }
          }
        },
        {
          "name": "11.2 Mark Notification as Read",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications/{{notification_id}}/read",
              "host": ["{{base_url}}"],
              "path": ["notifications", "{{notification_id}}", "read"]
            }
          }
        },
        {
          "name": "11.3 Send Notification (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"message\": \"Your vehicle registration has been approved! Registration Number: MH01AB1234\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/notifications/send",
              "host": ["{{base_url}}"],
              "path": ["notifications", "send"]
            }
          }
        }
      ]
    },
    {
      "name": "12. Analytics",
      "item": [
        {
          "name": "12.1 Dashboard Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/dashboard",
              "host": ["{{base_url}}"],
              "path": ["analytics", "dashboard"]
            }
          }
        },
        {
          "name": "12.2 Revenue Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/revenue",
              "host": ["{{base_url}}"],
              "path": ["analytics", "revenue"]
            }
          }
        },
        {
          "name": "12.3 Revenue with Date Filter",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/revenue?start_date=2025-01-01&end_date=2025-12-31",
              "host": ["{{base_url}}"],
              "path": ["analytics", "revenue"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-01-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-12-31"
                }
              ]
            }
          }
        },
        {
          "name": "12.4 Violation Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/violations",
              "host": ["{{base_url}}"],
              "path": ["analytics", "violations"]
            }
          }
        },
        {
          "name": "12.5 ML Risk Assessment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/ml-risk?limit=20",
              "host": ["{{base_url}}"],
              "path": ["analytics", "ml-risk"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
